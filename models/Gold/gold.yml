version: 2

groups:
  - name: sales_analytics
    owner:
      name: Sales Analytics Team
      email: colin.thornburg@dbtlabs.com

models:
  - name: order_analytics
    group: sales_analytics
    access: public
    description: "The order_analytics model provides a comprehensive, denormalized table of customer order data, collating essential metrics that is optimized for Snowflake and designed with downstream dashboarding in mind, this model empowers business users with timely and insightful analytics for strategic decision-making in sales, marketing, and product development."
    config:
      contract:
        enforced: true
    meta:
        owner: 'Danny the Data Engineer'
    columns:
      - name: order_id
        data_type: bigint
        constraints:
          - type: not_null
        description: "The unique order identifier"

      - name: customer_id
        data_type: bigint
        constraints:
          - type: not_null
        description: "The unique customer identifier"

      - name: first_name
        data_type: string
        description: "The first name of the customer"

      - name: last_name
        data_type: string
        description: "The last name initial of the customer"

      - name: order_date
        data_type: date
        description: "The first date an order was placed"

      - name: state
        data_type: string
        description: "The current status of the order"

      - name: payment_id
        data_type: bigint
        description: "The unique payment identifier"

      - name: payment_method
        data_type: string
        description: "The type of payment the customer used to make the purchase"

      - name: amount
        data_type: double
        description: "Amount in USD"

      - name: created_at
        data_type: date
        description: "The date in which the transaction was initiated by the customer"

      - name: first_order_date
        data_type: date
        description: "The first date an order was placed"

      - name: most_recent_order_date
        data_type: date
        description: "The most recent customer order date"
  
exposures:  
 - name: order_analytics_exposure
   type: dashboard # required
   maturity: high # optional
   url: https://10ax.online.tableau.com/#/site/dbtcolintdev885935/views/JaffleShop/OrderAnalyticsDBX # optional
   description: > # optional
     This is a dashboard for order analytics.
   
   depends_on: # expected
     - ref('order_analytics') # reference to your model
   
   owner:  
     name: Danny the Data Developer
     email: DannyDataDev@dbt.com